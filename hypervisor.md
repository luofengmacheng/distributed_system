## Hypervisor-based Fault-tolerance

原文链接：[Hypervisor-based Fault-tolerance](http://css.csail.mit.edu/6.824/2014/papers/bressoud-hypervisor.pdf)

摘要：本文描述了实现容错计算机系统的协议。这些协议对虚拟机管理员的管理程序进行补充，使主虚拟机和它的备份虚拟机协同工作。就可以构造容错计算机系统。要求不改变硬件、操作系统或者引用程序。这个原型系统运行程序时，比裸机慢2倍。

## 1 绪论

实现容错的一个主流方案是当处理器工作异常时，复制处理器上的计算。副本之间需要协调，以便它们执行相同的指令序列，并产生相同的结果。本文描述了这种方案的一个新奇的实现。我们在硬件和操作系统之间加入了一个软件层。这样构造的容错计算机系统不需要改变硬件、操作系统和应用程序。

我们的方法的好处是：考虑了工程和推广市场的时间的开销。这是基于两个方面。首先，对于一个给定的指令集架构，厂商会开发一系列的实现，在这些系列中，成本/性能(原文是cost/performance，个人认为应该是性价比)提高了。其次，无论是用硬件还是软件实现副本协调，都是很微妙的(原文是subtle)。根据这些观察，我们注意到以下三个问题：

(1) 如果在硬件上实现副本协调，那么，在实现每个架构时都会产生设计开销。由于设计副本协调硬件很耗时，需要支持容错就必然落后于成本/性能曲线。

(2) 由于成熟的操作系统都是很复杂的，因此，向已经存在的操作系统中添加副本协调机制是很困难的。另外，对于每个平台支持的操作系统，都要做出改变。

(3) 如果副本协调问题留给应用程序开发人员，那么每个应用程序的开发人员都必须解决同样的问题。而且，所有的程序员都必须熟悉副本协调的细微差别。或者，所有的程序员都只能使用给定的一些接口或者抽象。

这些问题促使我们探索在计算机系统中实现副本协调时，可以将副本协调实现在硬件、操作系统还是应用程序部分。

hypervisor是实现了虚拟机的软件层次，这些虚拟机拥有和hypervisor运行的硬件相同的指令集架构。由于虚拟机的指令集架构跟裸机一样，运行在虚拟机上的软件不能区分hypervisor是否存在。最有名的hypervisor可能就是IBM为360/67开发的CP-67和之后为370大型机开发的VM/360了。

有多种原因使用hypervisor。hypervisor允许在一个处理器上同时存在多个操作系统或者是同一操作系统的多个版本。即使多个虚拟机同时运行同一个操作系统，hypervisor提供了隔离，它简化了保护和共享。然而，我们的研究没有关注hypervisor本身的价值和成本。我们关注的是增加hypervisor以支持副本协调和容错的价值和成本。
